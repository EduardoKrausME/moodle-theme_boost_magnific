define(["exports","./util"],function(j,i){function p(b){return b&&b.__esModule?b:{"default":b}}function o(d,c){if(!(d instanceof c)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(j,"__esModule",{value:!0});var n=p(i),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},l=function(){function b(f,e){for(var h=0;h<e.length;h++){var g=e[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value" in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(a,f,e){return f&&b(a.prototype,f),e&&b(a,e),a}}(),k=function(J){if(void 0===window.Tether){throw new Error("Bootstrap tooltips require Tether (http://github.hubspot.com/tether/)")}var I="tooltip",H="4.0.0-alpha.4",G="bs.tooltip",F="."+G,E=J.fn[I],D=150,C="bs-tether",B={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[]},A={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array"},z={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},y={IN:"in",OUT:"out"},x={HIDE:"hide"+F,HIDDEN:"hidden"+F,SHOW:"show"+F,SHOWN:"shown"+F,INSERTED:"inserted"+F,CLICK:"click"+F,FOCUSIN:"focusin"+F,FOCUSOUT:"focusout"+F,MOUSEENTER:"mouseenter"+F,MOUSELEAVE:"mouseleave"+F},w={FADE:"fade",IN:"in"},g={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},f={element:!1,enabled:!1},e={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},d=function(){function a(h,c){o(this,a),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._tether=null,this.element=h,this.config=this._getConfig(c),this.tip=null,this._setListeners()}return l(a,[{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"toggleEnabled",value:function(){this._isEnabled=!this._isEnabled}},{key:"toggle",value:function(h){if(h){var r=this.constructor.DATA_KEY,q=J(h.currentTarget).data(r);q||(q=new this.constructor(h.currentTarget,this._getDelegateConfig()),J(h.currentTarget).data(r,q)),q._activeTrigger.click=!q._activeTrigger.click,q._isWithActiveTrigger()?q._enter(null,q):q._leave(null,q)}else{if(J(this.getTipElement()).hasClass(w.IN)){return void this._leave(null,this)}this._enter(null,this)}}},{key:"dispose",value:function(){clearTimeout(this._timeout),this.cleanupTether(),J.removeData(this.element,this.constructor.DATA_KEY),J(this.element).off(this.constructor.EVENT_KEY),this.tip&&J(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null}},{key:"show",value:function(){var q=this,L=J.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){J(this.element).trigger(L);var K=J.contains(this.element.ownerDocument.documentElement,this.element);if(L.isDefaultPrevented()||!K){return}var v=this.getTipElement(),u=n["default"].getUID(this.constructor.NAME);v.setAttribute("id",u),this.element.setAttribute("aria-describedby",u),this.setContent(),this.config.animation&&J(v).addClass(w.FADE);var t="function"==typeof this.config.placement?this.config.placement.call(this,v,this.element):this.config.placement,s=this._getAttachment(t);J(v).data(this.constructor.DATA_KEY,this).appendTo(document.body),J(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:s,element:v,target:this.element,classes:f,classPrefix:C,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),n["default"].reflow(v),this._tether.position(),J(v).addClass(w.IN);var r=function(){var b=q._hoverState;q._hoverState=null,J(q.element).trigger(q.constructor.Event.SHOWN),b===y.OUT&&q._leave(null,q)};if(n["default"].supportsTransitionEnd()&&J(this.tip).hasClass(w.FADE)){return void J(this.tip).one(n["default"].TRANSITION_END,r).emulateTransitionEnd(a._TRANSITION_DURATION)}r()}}},{key:"hide",value:function(h){var t=this,s=this.getTipElement(),r=J.Event(this.constructor.Event.HIDE),q=function(){t._hoverState!==y.IN&&s.parentNode&&s.parentNode.removeChild(s),t.element.removeAttribute("aria-describedby"),J(t.element).trigger(t.constructor.Event.HIDDEN),t.cleanupTether(),h&&h()};J(this.element).trigger(r),r.isDefaultPrevented()||(J(s).removeClass(w.IN),n["default"].supportsTransitionEnd()&&J(this.tip).hasClass(w.FADE)?J(s).one(n["default"].TRANSITION_END,q).emulateTransitionEnd(D):q(),this._hoverState="")}},{key:"isWithContent",value:function(){return Boolean(this.getTitle())}},{key:"getTipElement",value:function(){return this.tip=this.tip||J(this.config.template)[0]}},{key:"setContent",value:function(){var c=J(this.getTipElement());this.setElementContent(c.find(g.TOOLTIP_INNER),this.getTitle()),c.removeClass(w.FADE).removeClass(w.IN),this.cleanupTether()}},{key:"setElementContent",value:function(h,r){var q=this.config.html;"object"===("undefined"==typeof r?"undefined":m(r))&&(r.nodeType||r.jquery)?q?J(r).parent().is(h)||h.empty().append(r):h.text(J(r).text()):h[q?"html":"text"](r)}},{key:"getTitle",value:function(){var b=this.element.getAttribute("data-original-title");return b||(b="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),b}},{key:"cleanupTether",value:function(){this._tether&&this._tether.destroy()}},{key:"_getAttachment",value:function(b){return z[b.toUpperCase()]}},{key:"_setListeners",value:function(){var h=this,q=this.config.trigger.split(" ");q.forEach(function(s){if("click"===s){J(h.element).on(h.constructor.Event.CLICK,h.config.selector,J.proxy(h.toggle,h))}else{if(s!==e.MANUAL){var r=s===e.HOVER?h.constructor.Event.MOUSEENTER:h.constructor.Event.FOCUSIN,b=s===e.HOVER?h.constructor.Event.MOUSELEAVE:h.constructor.Event.FOCUSOUT;J(h.element).on(r,h.config.selector,J.proxy(h._enter,h)).on(b,h.config.selector,J.proxy(h._leave,h))}}}),this.config.selector?this.config=J.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()}},{key:"_fixTitle",value:function(){var b=m(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==b)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}},{key:"_enter",value:function(h,r){var q=this.constructor.DATA_KEY;return r=r||J(h.currentTarget).data(q),r||(r=new this.constructor(h.currentTarget,this._getDelegateConfig()),J(h.currentTarget).data(q,r)),h&&(r._activeTrigger["focusin"===h.type?e.FOCUS:e.HOVER]=!0),J(r.getTipElement()).hasClass(w.IN)||r._hoverState===y.IN?void (r._hoverState=y.IN):(clearTimeout(r._timeout),r._hoverState=y.IN,r.config.delay&&r.config.delay.show?void (r._timeout=setTimeout(function(){r._hoverState===y.IN&&r.show()},r.config.delay.show)):void r.show())}},{key:"_leave",value:function(h,r){var q=this.constructor.DATA_KEY;if(r=r||J(h.currentTarget).data(q),r||(r=new this.constructor(h.currentTarget,this._getDelegateConfig()),J(h.currentTarget).data(q,r)),h&&(r._activeTrigger["focusout"===h.type?e.FOCUS:e.HOVER]=!1),!r._isWithActiveTrigger()){return clearTimeout(r._timeout),r._hoverState=y.OUT,r.config.delay&&r.config.delay.hide?void (r._timeout=setTimeout(function(){r._hoverState===y.OUT&&r.hide()},r.config.delay.hide)):void r.hide()}}},{key:"_isWithActiveTrigger",value:function(){for(var b in this._activeTrigger){if(this._activeTrigger[b]){return !0}}return !1}},{key:"_getConfig",value:function(b){return b=J.extend({},this.constructor.Default,J(this.element).data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),n["default"].typeCheckConfig(I,b,this.constructor.DefaultType),b}},{key:"_getDelegateConfig",value:function(){var h={};if(this.config){for(var c in this.config){this.constructor.Default[c]!==this.config[c]&&(h[c]=this.config[c])}}return h}}],[{key:"_jQueryInterface",value:function(c){return this.each(function(){var h=J(this).data(G),b="object"===("undefined"==typeof c?"undefined":m(c))?c:null;if((h||!/destroy|hide/.test(c))&&(h||(h=new a(this,b),J(this).data(G,h)),"string"==typeof c)){if(void 0===h[c]){throw new Error('No method named "'+c+'"')}h[c]()}})}},{key:"VERSION",get:function(){return H}},{key:"Default",get:function(){return B}},{key:"NAME",get:function(){return I}},{key:"DATA_KEY",get:function(){return G}},{key:"Event",get:function(){return x}},{key:"EVENT_KEY",get:function(){return F}},{key:"DefaultType",get:function(){return A}}]),a}();return J.fn[I]=d._jQueryInterface,J.fn[I].Constructor=d,J.fn[I].noConflict=function(){return J.fn[I]=E,d._jQueryInterface},d}(jQuery);j["default"]=k});