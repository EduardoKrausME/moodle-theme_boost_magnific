define(["exports","./util"],function(i,h){function n(b){return b&&b.__esModule?b:{"default":b}}function m(d,c){if(!(d instanceof c)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(i,"__esModule",{value:!0});var l=n(h),k=function(){function b(f,e){for(var o=0;o<e.length;o++){var g=e[o];g.enumerable=g.enumerable||!1,g.configurable=!0,"value" in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(a,f,e){return f&&b(a.prototype,f),e&&b(a,e),a}}(),j=function(D){var C="dropdown",B="4.0.0-alpha.4",A="bs.dropdown",z="."+A,y=".data-api",x=D.fn[C],w=27,v=38,u=40,t=3,s={HIDE:"hide"+z,HIDDEN:"hidden"+z,SHOW:"show"+z,SHOWN:"shown"+z,CLICK:"click"+z,CLICK_DATA_API:"click"+z+y,KEYDOWN_DATA_API:"keydown"+z+y},f={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",OPEN:"open"},e={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},d=function(){function a(b){m(this,a),this._element=b,this._addEventListeners()}return k(a,[{key:"toggle",value:function(){if(this.disabled||D(this).hasClass(f.DISABLED)){return !1}var r=a._getParentFromElement(this),q=D(r).hasClass(f.OPEN);if(a._clearMenus(),q){return !1}if("ontouchstart" in document.documentElement&&!D(r).closest(e.NAVBAR_NAV).length){var p=document.createElement("div");p.className=f.BACKDROP,D(p).insertBefore(this),D(p).on("click",a._clearMenus)}var o={relatedTarget:this},b=D.Event(s.SHOW,o);return D(r).trigger(b),!b.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded","true"),D(r).toggleClass(f.OPEN),D(r).trigger(D.Event(s.SHOWN,o)),!1)}},{key:"dispose",value:function(){D.removeData(this._element,A),D(this._element).off(z),this._element=null}},{key:"_addEventListeners",value:function(){D(this._element).on(s.CLICK,this.toggle)}}],[{key:"_jQueryInterface",value:function(b){return this.each(function(){var c=D(this).data(A);if(c||D(this).data(A,c=new a(this)),"string"==typeof b){if(void 0===c[b]){throw new Error('No method named "'+b+'"')}c[b].call(this)}})}},{key:"_clearMenus",value:function(F){if(!F||F.which!==t){var E=D(e.BACKDROP)[0];E&&E.parentNode.removeChild(E);for(var r=D.makeArray(D(e.DATA_TOGGLE)),q=0;q<r.length;q++){var p=a._getParentFromElement(r[q]),o={relatedTarget:r[q]};if(D(p).hasClass(f.OPEN)&&!(F&&"click"===F.type&&/input|textarea/i.test(F.target.tagName)&&D.contains(p,F.target))){var b=D.Event(s.HIDE,o);D(p).trigger(b),b.isDefaultPrevented()||(r[q].setAttribute("aria-expanded","false"),D(p).removeClass(f.OPEN).trigger(D.Event(s.HIDDEN,o)))}}}}},{key:"_getParentFromElement",value:function(g){var p=void 0,o=l["default"].getSelectorFromElement(g);return o&&(p=D(o)[0]),p||g.parentNode}},{key:"_dataApiKeydownHandler",value:function(E){if(/(38|40|27|32)/.test(E.which)&&!/input|textarea/i.test(E.target.tagName)&&(E.preventDefault(),E.stopPropagation(),!this.disabled&&!D(this).hasClass(f.DISABLED))){var r=a._getParentFromElement(this),q=D(r).hasClass(f.OPEN);if(!q&&E.which!==w||q&&E.which===w){if(E.which===w){var p=D(r).find(e.DATA_TOGGLE)[0];D(p).trigger("focus")}return void D(this).trigger("click")}var o=D.makeArray(D(e.VISIBLE_ITEMS));if(o=o.filter(function(c){return c.offsetWidth||c.offsetHeight}),o.length){var b=o.indexOf(E.target);E.which===v&&b>0&&b--,E.which===u&&b<o.length-1&&b++,b<0&&(b=0),o[b].focus()}}}},{key:"VERSION",get:function(){return B}}]),a}();return D(document).on(s.KEYDOWN_DATA_API,e.DATA_TOGGLE,d._dataApiKeydownHandler).on(s.KEYDOWN_DATA_API,e.ROLE_MENU,d._dataApiKeydownHandler).on(s.KEYDOWN_DATA_API,e.ROLE_LISTBOX,d._dataApiKeydownHandler).on(s.CLICK_DATA_API,d._clearMenus).on(s.CLICK_DATA_API,e.DATA_TOGGLE,d.prototype.toggle).on(s.CLICK_DATA_API,e.FORM_CHILD,function(b){b.stopPropagation()}),D.fn[C]=d._jQueryInterface,D.fn[C].Constructor=d,D.fn[C].noConflict=function(){return D.fn[C]=x,d._jQueryInterface},d}(jQuery);i["default"]=j});