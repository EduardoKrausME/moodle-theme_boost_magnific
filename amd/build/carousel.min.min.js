define(["exports","./util"],function(j,i){function p(b){return b&&b.__esModule?b:{"default":b}}function o(d,c){if(!(d instanceof c)){throw new TypeError("Cannot call a class as a function")}}Object.defineProperty(j,"__esModule",{value:!0});var n=p(i),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},l=function(){function b(f,e){for(var h=0;h<e.length;h++){var g=e[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value" in g&&(g.writable=!0),Object.defineProperty(f,g.key,g)}}return function(a,f,e){return f&&b(a.prototype,f),e&&b(a,e),a}}(),k=function(E){var D="carousel",C="4.0.0-alpha.4",B="bs.carousel",A="."+B,z=".data-api",y=E.fn[D],x=600,w=37,v=39,g={interval:5000,keyboard:!0,slide:!1,pause:"hover",wrap:!0},f={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},e={NEXT:"next",PREVIOUS:"prev"},d={SLIDE:"slide"+A,SLID:"slid"+A,KEYDOWN:"keydown"+A,MOUSEENTER:"mouseenter"+A,MOUSELEAVE:"mouseleave"+A,LOAD_DATA_API:"load"+A+z,CLICK_DATA_API:"click"+A+z},H={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"right",LEFT:"left",ITEM:"carousel-item"},G={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".next, .prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},F=function(){function a(h,q){o(this,a),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(q),this._element=E(h)[0],this._indicatorsElement=E(this._element).find(G.INDICATORS)[0],this._addEventListeners()}return l(a,[{key:"next",value:function(){this._isSliding||this._slide(e.NEXT)}},{key:"nextWhenVisible",value:function(){document.hidden||this.next()}},{key:"prev",value:function(){this._isSliding||this._slide(e.PREVIOUS)}},{key:"pause",value:function(c){c||(this._isPaused=!0),E(this._element).find(G.NEXT_PREV)[0]&&n["default"].supportsTransitionEnd()&&(n["default"].triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}},{key:"cycle",value:function(c){c||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval(E.proxy(document.visibilityState?this.nextWhenVisible:this.next,this),this._config.interval))}},{key:"to",value:function(h){var s=this;this._activeElement=E(this._element).find(G.ACTIVE_ITEM)[0];var r=this._getItemIndex(this._activeElement);if(!(h>this._items.length-1||h<0)){if(this._isSliding){return void E(this._element).one(d.SLID,function(){return s.to(h)})}if(r===h){return this.pause(),void this.cycle()}var q=h>r?e.NEXT:e.PREVIOUS;this._slide(q,this._items[h])}}},{key:"dispose",value:function(){E(this._element).off(A),E.removeData(this._element,B),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}},{key:"_getConfig",value:function(b){return b=E.extend({},g,b),n["default"].typeCheckConfig(D,b,f),b}},{key:"_addEventListeners",value:function(){this._config.keyboard&&E(this._element).on(d.KEYDOWN,E.proxy(this._keydown,this)),"hover"!==this._config.pause||"ontouchstart" in document.documentElement||E(this._element).on(d.MOUSEENTER,E.proxy(this.pause,this)).on(d.MOUSELEAVE,E.proxy(this.cycle,this))}},{key:"_keydown",value:function(b){if(b.preventDefault(),!/input|textarea/i.test(b.target.tagName)){switch(b.which){case w:this.prev();break;case v:this.next();break;default:return}}}},{key:"_getItemIndex",value:function(c){return this._items=E.makeArray(E(c).parent().find(G.ITEM)),this._items.indexOf(c)}},{key:"_getItemByDirection",value:function(L,K){var J=L===e.NEXT,I=L===e.PREVIOUS,u=this._getItemIndex(K),t=this._items.length-1,s=I&&0===u||J&&u===t;if(s&&!this._config.wrap){return K}var r=L===e.PREVIOUS?-1:1,q=(u+r)%this._items.length;return q===-1?this._items[this._items.length-1]:this._items[q]}},{key:"_triggerSlideEvent",value:function(h,r){var q=E.Event(d.SLIDE,{relatedTarget:h,direction:r});return E(this._element).trigger(q),q}},{key:"_setActiveIndicatorElement",value:function(h){if(this._indicatorsElement){E(this._indicatorsElement).find(G.ACTIVE).removeClass(H.ACTIVE);var q=this._indicatorsElement.children[this._getItemIndex(h)];q&&E(q).addClass(H.ACTIVE)}}},{key:"_slide",value:function(L,K){var J=this,I=E(this._element).find(G.ACTIVE_ITEM)[0],u=K||I&&this._getItemByDirection(L,I),t=Boolean(this._interval),s=L===e.NEXT?H.LEFT:H.RIGHT;if(u&&E(u).hasClass(H.ACTIVE)){return void (this._isSliding=!1)}var r=this._triggerSlideEvent(u,s);if(!r.isDefaultPrevented()&&I&&u){this._isSliding=!0,t&&this.pause(),this._setActiveIndicatorElement(u);var q=E.Event(d.SLID,{relatedTarget:u,direction:s});n["default"].supportsTransitionEnd()&&E(this._element).hasClass(H.SLIDE)?(E(u).addClass(L),n["default"].reflow(u),E(I).addClass(s),E(u).addClass(s),E(I).one(n["default"].TRANSITION_END,function(){E(u).removeClass(s).removeClass(L),E(u).addClass(H.ACTIVE),E(I).removeClass(H.ACTIVE).removeClass(L).removeClass(s),J._isSliding=!1,setTimeout(function(){return E(J._element).trigger(q)},0)}).emulateTransitionEnd(x)):(E(I).removeClass(H.ACTIVE),E(u).addClass(H.ACTIVE),this._isSliding=!1,E(this._element).trigger(q)),t&&this.cycle()}}}],[{key:"_jQueryInterface",value:function(c){return this.each(function(){var q=E(this).data(B),h=E.extend({},g,E(this).data());"object"===("undefined"==typeof c?"undefined":m(c))&&E.extend(h,c);var b="string"==typeof c?c:h.slide;if(q||(q=new a(this,h),E(this).data(B,q)),"number"==typeof c){q.to(c)}else{if("string"==typeof b){if(void 0===q[b]){throw new Error('No method named "'+b+'"')}q[b]()}else{h.interval&&(q.pause(),q.cycle())}}})}},{key:"_dataApiClickHandler",value:function(h){var t=n["default"].getSelectorFromElement(this);if(t){var s=E(t)[0];if(s&&E(s).hasClass(H.CAROUSEL)){var r=E.extend({},E(s).data(),E(this).data()),q=this.getAttribute("data-slide-to");q&&(r.interval=!1),a._jQueryInterface.call(E(s),r),q&&E(s).data(B).to(q),h.preventDefault()}}}},{key:"VERSION",get:function(){return C}},{key:"Default",get:function(){return g}}]),a}();return E(document).on(d.CLICK_DATA_API,G.DATA_SLIDE,F._dataApiClickHandler),E(window).on(d.LOAD_DATA_API,function(){E(G.DATA_RIDE).each(function(){var a=E(this);F._jQueryInterface.call(a,a.data())})}),E.fn[D]=F._jQueryInterface,E.fn[D].Constructor=F,E.fn[D].noConflict=function(){return E.fn[D]=y,F._jQueryInterface},F}(jQuery);j["default"]=k});